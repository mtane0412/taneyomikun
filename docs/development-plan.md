# 音声読み上げデスクトップアプリケーション開発計画

## プロジェクト概要
棒読みちゃんのような音声読み上げデスクトップアプリケーションをTauri v2とCartesia TTS APIを使用して開発します。

## 技術スタック
- **フロントエンド**: Vite + React/Vue/Svelte（選定予定）+ TypeScript
- **バックエンド**: Tauri v2 (Rust)
- **音声合成**: Cartesia TTS API (WebSocket接続)
- **スタイリング**: Tailwind CSS または CSS Modules

## 開発フェーズ

### フェーズ1: 基盤構築（優先度: 高）

#### 1. プロジェクトセットアップ
- Tauri + Vite環境の構築
- TypeScript設定
- ESLint/Prettier設定
- 基本的なプロジェクト構造の確立

#### 2. 基本的なUIデザインと実装
- **メインウィンドウ**
  - テキスト入力エリア（複数行対応）
  - 読み上げ開始/停止ボタン
  - 音量インジケーター
- **設定パネル**
  - API キー入力フィールド
  - 音声選択ドロップダウン
  - 速度・音量スライダー

#### 3. Cartesia TTS API統合
- Rust側でのAPI通信モジュール実装
- APIキーの安全な保存（Tauri の credentials API使用）
- エラーハンドリング（ネットワークエラー、APIエラー）

#### 4. 音声再生機能の実装
- WebSocketでのストリーミング音声受信
- 音声バッファリング管理
- 再生制御（開始、停止、一時停止）

### フェーズ2: 機能拡張（優先度: 中）

#### 5. 音声設定機能
- 複数の音声プロファイル管理
- 日本語音声の最適化
- 読み上げ速度の細かな調整（0.5x - 2.0x）
- 音量の記憶と自動適用

#### 6. 読み上げキューシステム
- 複数テキストのキューイング
- キュー表示UI
- 優先度付きキュー機能
- キューの保存と読み込み

#### 7. システムトレイ対応
- 最小化時のトレイ常駐
- トレイメニューからの主要機能アクセス
- 通知機能（読み上げ開始/完了）

### フェーズ3: 応用機能（優先度: 低）

#### 8. ホットキー機能
- グローバルショートカットの設定
- カスタマイズ可能なキーバインディング
- クリップボード監視と自動読み上げオプション

#### 9. 読み上げ履歴機能
- 読み上げたテキストの履歴保存
- 履歴の検索・フィルタリング
- 履歴からの再読み上げ

### フェーズ4: 品質保証（優先度: 高）

#### 10. テスト実装とエラーハンドリング
- ユニットテスト（Rust側とフロントエンド側）
- 統合テスト
- エラー処理の強化
- ユーザーフレンドリーなエラーメッセージ

## アーキテクチャ設計

### ディレクトリ構造
```
taneyomikun/
├── src/                    # フロントエンドソース
│   ├── components/         # UIコンポーネント
│   ├── hooks/             # カスタムフック
│   ├── stores/            # 状態管理
│   ├── utils/             # ユーティリティ関数
│   └── main.ts
├── src-tauri/             # Rustバックエンド
│   ├── src/
│   │   ├── commands/      # Tauriコマンド
│   │   ├── tts/          # TTS関連モジュール
│   │   ├── config/       # 設定管理
│   │   └── main.rs
│   └── tauri.conf.json
├── tests/                 # テストファイル
└── docs/                  # ドキュメント
```

### データフロー
1. ユーザーがテキストを入力
2. フロントエンドからTauriコマンドを呼び出し
3. RustバックエンドがCartesia APIにWebSocket接続
4. ストリーミングで音声データを受信
5. 音声をバッファリングして再生
6. 再生状態をフロントエンドに通知

## 技術的な考慮事項

### パフォーマンス
- WebSocketの接続を事前に確立して遅延を最小化
- 音声バッファリングで途切れない再生を実現
- メモリ使用量の最適化

### セキュリティ
- APIキーの暗号化保存
- Content Security Policy (CSP) の適切な設定
- 外部通信の最小化

### ユーザビリティ
- 直感的なUI/UX
- キーボードショートカット対応
- アクセシビリティ対応（スクリーンリーダー互換性）

## 開発スケジュール目安

- **週1-2**: フェーズ1完了（基本機能の実装）
- **週3-4**: フェーズ2完了（機能拡張）
- **週5**: フェーズ3完了（応用機能）
- **週6**: フェーズ4完了（品質保証とリリース準備）

## リリース計画

### v1.0.0 (MVP)
- 基本的な読み上げ機能
- 音声設定
- システムトレイ対応

### v1.1.0
- ホットキー機能
- 読み上げキュー
- 履歴機能

### v2.0.0
- プラグインシステム
- カスタム辞書機能
- 多言語対応の強化